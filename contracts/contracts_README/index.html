<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.69">
<title data-react-helmet="true">Trustlines Smart Contract Platform | Trustlines Developer Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-contracts-current"><meta data-react-helmet="true" property="og:title" content="Trustlines Smart Contract Platform | Trustlines Developer Docs"><meta data-react-helmet="true" name="description" content="This documentation explains how to deploy Trustlines smart contracts,"><meta data-react-helmet="true" property="og:description" content="This documentation explains how to deploy Trustlines smart contracts,"><meta data-react-helmet="true" property="og:url" content="https://dev.trustlines.network/contracts/contracts_README"><link data-react-helmet="true" rel="shortcut icon" href="/img/tl-favicon.png"><link data-react-helmet="true" rel="canonical" href="https://dev.trustlines.network/contracts/contracts_README"><link rel="stylesheet" href="/styles.02f23d27.css">
<link rel="preload" href="/styles.0d7f2b78.js" as="script">
<link rel="preload" href="/runtime~main.c4b526c4.js" as="script">
<link rel="preload" href="/main.9134696a.js" as="script">
<link rel="preload" href="/1.9ea2d1a9.js" as="script">
<link rel="preload" href="/1be78505.db2586b3.js" as="script">
<link rel="preload" href="/c4f5d8e4.ce5afd48.js" as="script">
<link rel="preload" href="/538.63178254.js" as="script">
<link rel="preload" href="/537.39ec091b.js" as="script">
<link rel="preload" href="/b67d3976.77f9c6a2.js" as="script">
<link rel="preload" href="/536.11a64cdc.js" as="script">
<link rel="preload" href="/a7c345c1.2d46b5e8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/tl-favicon.png" alt="Trustlines logo"><strong class="navbar__title">Trustlines Dev Docs</strong></a><a class="navbar__item navbar__link" href="/blockchain/tlbc">Blockchain</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/contracts/contracts_README">Contracts</a><a class="navbar__item navbar__link" href="/relay/introduction">Relay</a><a class="navbar__item navbar__link" href="/clientlib/introduction">Clientlib</a><a class="navbar__item navbar__link" href="/mobileapp/introduction">Trustlines App</a><a class="navbar__item navbar__link" href="/docs/contributing">Contributing</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/trustlines-protocol/contracts/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_16CL"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/tl-favicon.png" alt="Trustlines logo"><strong class="navbar__title">Trustlines Dev Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/blockchain/tlbc">Blockchain</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/contracts/contracts_README">Contracts</a></li><li class="menu__list-item"><a class="menu__link" href="/relay/introduction">Relay</a></li><li class="menu__list-item"><a class="menu__link" href="/clientlib/introduction">Clientlib</a></li><li class="menu__list-item"><a class="menu__link" href="/mobileapp/introduction">Trustlines App</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/contributing">Contributing</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive thin-scrollbar menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/contracts/contracts_README">Trustlines Smart Contract Platform</a></li><li class="menu__list-item"><a class="menu__link" href="/contracts/contracts_deployment">Trustlines smart contracts deployment</a></li><li class="menu__list-item"><a class="menu__link" href="/contracts/currency_networks_tlbc">Currency Networks on Trustlines Blockchain</a></li><li class="menu__list-item"><a class="menu__link" href="/contracts/deployed_contracts">Deployed contracts</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_39qw"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Trustlines Smart Contract Platform</h1></header><div class="markdown"><p>This documentation explains how to deploy Trustlines smart contracts,
for creating your own currency network and trustlines exchange.
The exchange functionality is not fully supported at this point.
The current documentation is written for an Ubuntu Linux system.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><ul><li>Python 3.6 or up and dev dependencies</li><li><a href="https://pip.pypa.io/en/stable/" target="_blank" rel="noopener noreferrer">pip</a></li><li>git</li></ul><p>Run</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">apt</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> build-essential python3-dev python3-virtualenv virtualenv pkg-config libssl-dev automake autoconf libtool </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">make</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><p>One of the dependencies used is the secp256k1 library. If you&#x27;re using
python 3.5 on linux you can skip the following step, since pypi contains
binary packages for secp256k1. If not, you&#x27;ll have to run the following
to install the secp256k1 C library:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> clone https://github.com/bitcoin-core/secp256k1.git</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> secp256k1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./autogen.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./configure --enable-module-recovery</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">make</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> ldconfig</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deployment-tools"></a>Deployment tools<a class="hash-link" href="#deployment-tools" title="Direct link to heading">#</a></h3><p>This section runs through the tooling necessary for deploying the
contracts.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ethereum-client"></a>Ethereum client<a class="hash-link" href="#ethereum-client" title="Direct link to heading">#</a></h5><p>To deploy the Trustlines smart contracts, you need access to an ethereum client,
e.g. geth or parity, which is synced to the chain you want to use. The
client needs to expose the JSON RPC endpoint. Additionally you need an
account with enough ether to pay for the contract deployment.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deployment-setup"></a>Deployment setup<a class="hash-link" href="#deployment-setup" title="Direct link to heading">#</a></h5><p>Please run <code>pip install trustlines-contracts-deploy</code> to install the <code>tl-deploy</code>
tool from PyPI. Solidity itself isn&#x27;t needed anymore.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="tl-deploy"></a>tl-deploy<a class="hash-link" href="#tl-deploy" title="Direct link to heading">#</a></h5><p>The tool <code>tl-deploy</code> allows you to deploy the relevant contracts.</p><p>Use <code>tl-deploy --help</code> to find out about the relevant commands or read
further in the <a href="/contracts/contracts_deployment">deploy documentation</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="development"></a>Development<a class="hash-link" href="#development" title="Direct link to heading">#</a></h3><p>To start developing install the development dependencies into a venv
with <code>pip install -c constraints.txt -r requirements.txt</code></p><p>Download and install the solidity compiler solc into bin for compiling the
contracts</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-bash codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -L -o </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/bin/solc https://github.com/ethereum/solidity/releases/download/v0.5.8/solc-static-linux </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">chmod</span><span class="token plain"> +x </span><span class="token environment constant" style="color:rgb(130, 170, 255)">$HOME</span><span class="token plain">/bin/solc</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="compiling"></a>Compiling<a class="hash-link" href="#compiling" title="Direct link to heading">#</a></h5><p>The contracts can be compiled with <code>make compile</code>. This will create a
file <code>contracts.json</code> with all the compiled contracts.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="testing"></a>Testing<a class="hash-link" href="#testing" title="Direct link to heading">#</a></h5><p>For testing we use pytest with an ethereum tester plugin. The tests can
be run with <code>pytest</code>. Please not that this will recompile all contracts
automatically, there&#x27;s no need to call <code>make compile</code> manually.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installation"></a>Installation<a class="hash-link" href="#installation" title="Direct link to heading">#</a></h5><p>Please run <code>make install</code> to install the trustlines-contracts-bin and
trustlines-contracts-deploy tool from the git checkout.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="change-log"></a>Change log<a class="hash-link" href="#change-log" title="Direct link to heading">#</a></h3><p>See <a href="https://github.com/trustlines-protocol/contracts/blob/master/CHANGELOG.rst" target="_blank" rel="noopener noreferrer">CHANGELOG</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/trustlines-protocol/tl-dev-docs/edit/master/contracts/contracts_README.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/contracts/contracts_deployment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Trustlines smart contracts deployment Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a><ul><li><a href="#deployment-tools" class="table-of-contents__link">Deployment tools</a></li><li><a href="#development" class="table-of-contents__link">Development</a></li><li><a href="#change-log" class="table-of-contents__link">Change log</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Websites</h4><ul class="footer__items"><li class="footer__item"><a href="https://blog.trustlines.network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trustlines Blog</a></li><li class="footer__item"><a href="https://trustlines.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trustlines Foundation</a></li><li class="footer__item"><a href="https://docs.trustlines.network//" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trustlines User Docs</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://forum.trustlines.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trustlines Forum</a></li><li class="footer__item"><a href="http://eepurl.com/gHqYyX" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trustlines Newsletter</a></li><li class="footer__item"><a href="https://t.me/trustlines_network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trustlines Network in Telegram</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/trustlines-protocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trustlines on github</a></li><li class="footer__item"><a href="https://gitter.im/trustlines/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trustlines Technical Chat</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 Trustlines.</div></div></div></footer></div>
<script src="/styles.0d7f2b78.js"></script>
<script src="/runtime~main.c4b526c4.js"></script>
<script src="/main.9134696a.js"></script>
<script src="/1.9ea2d1a9.js"></script>
<script src="/1be78505.db2586b3.js"></script>
<script src="/c4f5d8e4.ce5afd48.js"></script>
<script src="/538.63178254.js"></script>
<script src="/537.39ec091b.js"></script>
<script src="/b67d3976.77f9c6a2.js"></script>
<script src="/536.11a64cdc.js"></script>
<script src="/a7c345c1.2d46b5e8.js"></script>
</body>
</html>